<div class="card">
  <header class="card-header text-white bg-info">S'enregister</header>
  <div class="card-body">
    <form (ngSubmit)="saveData()" [formGroup]="registerForm">
      <div class="row mb-3">
        <div class="col-md-6">
          <label for="firstName" class="form-label">Nom</label>
          <input
            formControlName="firstName"
            [ngClass]="{
              'is-invalid':
                registerForm.get('firstName').touched &&
                !registerForm.get('firstName').valid
            }"
            type="text"
            class="form-control"
            id="firstName"
            placeholder="Votre Nom"
          />
          <div class="invalid-feedback">
            <span *ngIf="registerForm.get('firstName').errors?.['required']">
              Entrez votre Nom
            </span>
            <span *ngIf="registerForm.get('firstName').errors?.['minlength']">
              Minimun 4 caractères
            </span>
          </div>
        </div>

        <div class="col-md-6">
          <label for="lastName" class="form-label">Prénoms</label>
          <input
            formControlName="lastName"
            [ngClass]="{
              'is-invalid':
                registerForm.get('lastName').touched &&
                !registerForm.get('lastName').valid
            }"
            type="text"
            class="form-control"
            id="lastName"
            placeholder="Vos Prénoms"
          />
          <div class="invalid-feedback">
            <span *ngIf="registerForm.get('lastName').errors?.['required']">
              Entrez vos Prénoms
            </span>
            <span *ngIf="registerForm.get('lastName').errors?.['maxlength']">
              Maximum 20 caractères
            </span>
          </div>
        </div>
      </div>

      <div class="row mb-3" formGroupName="emailGroup">
        <div class="col-md-6">
          <label for="email" class="form-label">Email</label>
          <input
            formControlName="email"
            [ngClass]="{
              'is-invalid':
                registerForm.get('emailGroup').errors ||
                (registerForm.get('emailGroup.email').touched &&
                  !registerForm.get('emailGroup.email').valid)
            }"
            type="email"
            class="form-control"
            id="email"
            placeholder="Votre Email"
          />
          <div class="invalid-feedback">
            <span
              *ngIf="registerForm.get('emailGroup.email').errors?.['required']"
            >
              Entrez votre email
            </span>
            <span
              *ngIf="registerForm.get('emailGroup.email').errors?.['email']"
            >
              Votre email est invalide
            </span>
          </div>
        </div>

        <div class="col-md-6">
          <label for="confirmEmailId" class="form-label"
            >Confirmer votre email
          </label>
          <input
            formControlName="confirmEmail"
            [ngClass]="{
              'is-invalid':
                registerForm.get('emailGroup').errors ||
                ((registerForm.get('emailGroup.confirmEmail').touched ||
                  registerForm.get('emailGroup.confirmEmail').dirty) &&
                  !registerForm.get('emailGroup.confirmEmail').valid)
            }"
            type="email"
            class="form-control"
            id="confirmEmailId"
            name="email"
            placeholder="Confirmer votre email"
          />
          <div class="invalid-feedback">
            <span
              *ngIf="registerForm.get('emailGroup.confirmEmail').errors?.['required']"
            >
              Merci de confirmer votre email
            </span>
            <!-- <span> L'email ne correspond pas </span> -->
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4">
          <label for="email" class="form-label">Téléphone</label>
          <input
            [ngClass]="{ 'is-invalid': !registerForm.get('phone').valid }"
            formControlName="phone"
            type="tel"
            class="form-control"
            id="phoneId"
            placeholder="Numéro de téléphone"
          />
          <div class="invalid-feedback">
            <span *ngIf="registerForm.get('phone').errors?.['required']">
              Veillez entrer votre numéro de téléphone.
            </span>
          </div>
        </div>
        <div class="col-md-4 mt-2">
          <label for="">Recevoir les notifications</label>
          <div>
            <div class="form-check form-check-inline">
              <input
                formControlName="notification"
                (click)="setNotificationSetting('email')"
                class="form-check-input"
                type="radio"
                name=""
                id=""
                value="email"
              />
              <label class="form-check-label" for="inlineRadio1">E-mail</label>
            </div>
            <div class="form-check form-check-inline">
              <input
                formControlName="notification"
                (click)="setNotificationSetting('text')"
                class="form-check-input"
                type="radio"
                name=""
                id=""
                value="text"
              />
              <label class="form-check-label" for="inlineRadio2">Texte</label>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <label for="ratingId" class="form-label">Note</label>
          <input
            type="number"
            class="form-control"
            id="ratingId"
            formControlName="rating"
            [ngClass]="{
              'is-invalid':
                (registerForm.get('rating').touched ||
                  registerForm.get('rating').dirty) &&
                !registerForm.get('rating').valid
            }"
            placeholder="Choisir une note"
          />
          <div class="invalid-feedback">
            <span *ngIf="registerForm.get('rating').errors?.['RangeError']">
              Noter notre service client sur une échelle de 1 à 5.
            </span>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <div class="form-check">
            <input
              formControlName="sendCatalog"
              class="form-check-input"
              type="checkbox"
              value=""
              id="sendCatalogId"
            />
            <label class="form-check-label" for="sendCatalogId">
              Oui, je souhaite recevoir de la publicité
            </label>
          </div>
        </div>
      </div>

      <div class="row mb-3">
        <!-- *ngIf="user.sendCatalog"  -->
        <div class="col-md-3">
          <label for="adressPrincipale" class="form-label"
            >Adresse principale</label
          >
          <input
            type="text"
            class="form-control"
            id=""
            name="adressPrincipale"
            placeholder="Votre adresse principale"
            required
          />
        </div>
        <div class="col-md-3">
          <label for="adressSecondary" class="form-label"
            >Adresse secondaire</label
          >
          <input
            type="text"
            class="form-control"
            id=""
            name="adressSecondary"
            placeholder="Votre adresse secondaire"
          />
        </div>

        <div class="col-md-2">
          <label for="city" class="form-label">Ville</label>
          <input
            type="text"
            class="form-control"
            id=""
            name="city"
            placeholder="Votre Ville"
            required
          />
        </div>

        <div class="col-md-2">
          <label for="zip" class="form-label">Code Postal</label>
          <input
            type="number"
            class="form-control"
            id=""
            name="zip"
            placeholder="Votre code postal"
            required
          />
        </div>

        <div class="col-md-2">
          <label for="department" class="form-label">Département</label>
          <select class="form-select" name="department" id="" required>
            <option selected disabled value="">Choisir...</option>
            <option value="A">Hauts-de-Seine</option>
            <option value="B">Seine-Saint-Denis</option>
            <option value="C">Essone</option>
            <option value="D">Paris</option>
            <option value="E">Val-de-Marne</option>
            <option value="F">Seine-et-Marne</option>
            <option value="G">Yvelines</option>
            <option value="H">Val-d'Oise</option>
            <option value="I">Seine-et-Marne</option>
          </select>
        </div>
      </div>

      <div class="text-right">
        <button
          (click)="fillFormData()"
          type="submit"
          class="btn btn-outline-info mr-2"
        >
          Remplir les champs par défaut
        </button>
        <button
          [disabled]="!registerForm.valid"
          type="button"
          class="btn btn-info m-3"
        >
          Sauvegarder
        </button>
      </div>
    </form>
  </div>
</div>

<hr />
<p>Dirty:{{ registerForm.dirty }}</p>
<p>Pristine:{{ registerForm.pristine }}</p>
<p>Invalid:{{ registerForm.invalid }}</p>
<p>Valeur :</p>
<pre>{{ registerForm.value | json }}</pre>
